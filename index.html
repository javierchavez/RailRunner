<!DOCTYPE html>
<html>
<head>
    <title></title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">


    <!-- Latest compiled and minified JavaScript -->
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>


    <!--<script src="app.js"></script>-->

    <style type="text/css">
        /*body { background-color: #912924; }*/
        #holidayList { display: none; }

    </style>

</head>
<body>

    <div class="jumbotron" >
        <div class="container">

        </div>
    </div>

    <div class="container">

        <div class="row">
            <h3>Choose Direction</h3>
        </div>
        <div class="row">
            <!--<div class="col-md-6">-->
                <ul class="nav nav-pills nav-justified direction">
                    <li class="active"><a href="#">Northbound</a></li>
                    <li><a href="#">Southbound</a></li>
                </ul>
            <!--</div>-->
        </div>
        <div class="row">
            <h3>Choose Day</h3>
        </div>
        <div class="row">
            <!--<div class="col-md-6">-->
                <ul class="nav nav-pills nav-justified direction">
                    <li class="active"><a href="#">Weekday</a></li>
                    <li><a href="#">Weekend</a></li>
                    <li><a href="#" >Holiday</a></li>
                </ul>
            <!--</div>-->
        </div>



        <select class="form-control" id="holidayList">
            <option>Martin Luther King Jr. Day</option>
            <option>Presidents' Day</option>
            <option>Memorial Day</option>
            <option>Independence Day</option>
            <option>Labor Day Weekend</option>
            <option>Columbus Day</option>
            <option>Veterans Day</option>
            <option>Thanksgiving Day</option>
            <option>Day After Thanksgiving</option>
            <option>Christmas Eve</option>
            <option>Christmas Day</option>
            <option>Day After Christmas</option>
            <option>New Year's Eve</option>
            <option>New Year's Day</option>
            <option>Day After New Year's</option>
        </select>
    </div>
    <div class="panel-group" id="accordion">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                        Belen
                    </a>
                </h4>
            </div>
            <div id="collapseOne" class="panel-collapse collapse in">
                <div class="panel-body">
                    <div class="bs-example">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th>Ride</th>
                                <th>Time</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>#504</td>
                                <td>3:55A</td>


                            </tr>
                            <tr>
                                <td>#102 exp</td>
                                <td>5:39A</td>


                            </tr>
                            <tr>
                                <td>#506</td>
                                <td>6:35A</td>

                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                        Belen
                    </a>
                </h4>
            </div>
            <div id="collapseTwo" class="panel-collapse collapse in">
                <div class="panel-body">
                    <div class="bs-example">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th>Ride</th>
                                <th>Time</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>#504</td>
                                <td>3:55A</td>


                            </tr>
                            <tr>
                                <td>#102 exp</td>
                                <td>5:39A</td>


                            </tr>
                            <tr>
                                <td>#506</td>
                                <td>6:35A</td>

                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <script type="text/javascript">
        // Helper to find unique stations
        var unique = function(origArr) {
            var newArr = [],
                    origLen = origArr.length,
                    found,
                    x, y;

            for ( x = 0; x < origLen; x++ ) {
                found = undefined;
                for ( y = 0; y < newArr.length; y++ ) {
                    if ( origArr[x] === newArr[y] ) {
                        found = true;
                        break;
                    }
                }
                if ( !found) newArr.push( origArr[x] );
            }
            return newArr;
        };

        var data;
        var ajax = {
            parseJSONP: function(result){
                data = result;
                tmp = []
                for (var g =0; g < data[0]["data"].length; g++){
                    tmp.push(data[0]["data"][g]["station"])
                }
                // get usique stations
                test = unique(tmp)

            }
        }


        $.ajax(
                {
                    type       : "GET",
                    url        : "http://build.appliciti.com:8000/nmrx/config/work/json-all-schedules/",
                    dataType   : 'jsonp',
                    success    : function(response) {
                        alert("Success")
                        ajax.parseJSONP(response);
                    },
                    error      : function() {
                        alert('Not working!');
                    }

                }

        );

        var direction, day;
        $(document).ready(function () {
            $('ul.nav > li a').click(function (e) {
                $(this).closest('ul.nav').find('.active').removeClass('active');
                $(this).parent().addClass('active');
                if($(this).text() == "Holiday"){
                    $('#holidayList').css({"display":"inline"})
                } else {
                    $('#holidayList').css({"display":"none"})
                }

                refresh();
                updateData();
            });
        });

        function refresh(){
            if(data != null){
                for (var i =0; i < data.length;i++){
                    //add check for holiday
                    if((data[i]["name"].indexOf(direction) != -1) && (data[i]["name"].indexOf(day) != -1)){
                        for (var y = 0; y < data[i]["name"]["data"].size; y++){
                            for (var g =0; g < data[0]["data"].length; g++){
                                tmp.push(data[0]["data"][g]["station"])
                            }
                        }

                    }
                }
            }
        }

        function updateData(){
            //creating drop downs
            var stringacc = ""
            for (var s = 0; s < test.length; s++){

            }
        }


    </script>

</body>
</html>